Script Name: ADX - RSI Strategy by Trade Rush (created by SirPoggy)
Author: UnknownUnicorn20967364
Description: This is one of many new strategies coming soon which were seen on Trade Rush
 This one is the ADX / RSI Strategy seen here: 
  https:www.youtube.com/watch?v=uSkGE0ujyn4

 While the strategy has been modified slightly to use the DMI instead of the ADX, the core of the strategy is essentially the same
 Long signals are generated when the RSI is above 70, close is...
PineScript code:

Pine Scriptâ„¢ strategy
ADX / RSI Strategy by Trade Rush (created by SirPoggy)
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
//@version=4
//
//Â StrategyÂ CodedÂ byÂ SirPoggy
strategy("[SirPoggy]Â SimpleÂ andÂ EffectiveÂ RSIÂ Strategy",Â overlay=true,currency=currency.USD,process_orders_on_close=true,default_qty_type=strategy.percent_of_equity,initial_capital=500,default_qty_value=100,pyramiding=1,calc_on_order_fills=false,calc_on_every_tick=true)
//
//
//Â UserÂ Inputs
//
showbox=Â input(title="ShowÂ StatusÂ Box?",group="MainÂ StrategyÂ Settings",Â type=input.bool,Â defval=true)
backtest=Â input(title="ShowÂ BacktestÂ Results?",group="MainÂ StrategyÂ Settings",Â type=input.bool,Â defval=true)
showwinÂ =Â input(title="ShowÂ WinÂ /Â LossÂ labels?",Â type=input.bool,Â defval=true,group="MainÂ StrategyÂ Settings")
enableLong=Â input(title="EnableÂ LongÂ Entries?",group="MainÂ StrategyÂ Settings",Â type=input.bool,Â defval=true)
enableShort=Â input(title="EnableÂ ShortÂ Entries?",group="MainÂ StrategyÂ Settings",Â type=input.bool,Â defval=true)
//MAINÂ TRENDÂ Strategy
useslowemaÂ =Â input(title="EnableÂ GlobalÂ Trend",Â type=input.bool,Â defval=false,group="MainÂ StrategyÂ Settings",group="MainÂ StrategyÂ Settings")
emalenÂ =Â input(200,Â minval=1,Â title="GlobalÂ TrendÂ Length",group="MainÂ StrategyÂ Settings")
emaslowÂ =Â ema(close,emalen)
lookback=Â input(10,group="MainÂ StrategyÂ Settings",title="UniversalÂ LookbackÂ PeriodÂ forÂ Strategies")
plot(emaslow,"GlobalÂ TrendÂ EMA",transp=Â useslowemaÂ ?Â 0Â :Â 100,color=color.white)
//RSIÂ StrategyÂ Options
usersiÂ =Â input(title="EnableÂ RSIÂ Strategy",group="ğŸ”˜Â RSIÂ StrategyÂ SettingsÂ ğŸ”˜",Â type=input.bool,Â defval=false)
rsitypeÂ =Â input(title="RSIÂ StrategyÂ Type",group="ğŸ”˜Â RSIÂ StrategyÂ SettingsÂ ğŸ”˜",Â defval="Standard",Â options=["Standard",Â "Reversal","50/50Â Method","StrictÂ Standard","StrictÂ 50/50","StrictÂ Reversal"],tooltip="StandardÂ -Â RSIÂ ValueÂ isÂ higherÂ thanÂ theÂ overboughtÂ (def:Â 70)Â thresholdÂ forÂ Longs,Â higherÂ thanÂ oversoldÂ (def:Â 30)Â forÂ shortsÂ \n\nEMAÂ -Â ComparesÂ aÂ 12Â andÂ 26Â periodÂ RSIÂ EMAÂ toÂ determineÂ longÂ andÂ shortÂ entries.\n\nReversalÂ -Â RSIÂ ValueÂ aboveÂ oversoldÂ thresholdÂ forÂ longsÂ andÂ aboveÂ overboughtÂ thresholdÂ forÂ longs\n\n50/50Â MethodÂ -Â AnyÂ crossÂ onÂ theÂ RSIÂ atÂ 50Â isÂ aÂ signalÂ forÂ longÂ orÂ shortÂ dependingÂ onÂ theÂ direction")
rsistratÂ =Â input(title="RSIÂ StrategyÂ Settings",group="ğŸ”˜Â RSIÂ StrategyÂ SettingsÂ ğŸ”˜",Â defval="Standard",Â options=["Standard",Â "MoreÂ Sensitive"],tooltip="StandardÂ -Â SetsÂ RSIÂ toÂ 14Â period\n\nMoreÂ SensitiveÂ -Â SetsÂ RSIÂ toÂ 8")
//
//Â ADXÂ StrategyÂ Settings
useadxÂ =Â input(title="EnableÂ ADXÂ Strategy",Â type=input.bool,group="ğŸ”˜Â ADXÂ StrategyÂ SettingsÂ ğŸ”˜",Â defval=false)
adxtypeÂ =Â input(title="ADXÂ StrategyÂ Settings",group="ğŸ”˜Â ADXÂ StrategyÂ SettingsÂ ğŸ”˜",Â defval="Standard",Â options=["LessÂ Sensitive","Standard",Â "MoreÂ Sensitive"],tooltip="StandardÂ -Â SetsÂ ADXÂ strategyÂ toÂ 14Â period\n\nMoreÂ SensitiveÂ -Â SetsÂ ADXÂ strategyÂ toÂ 8\n\nLessÂ SensitiveÂ -Â SetsÂ ADXÂ toÂ 21Â period")
adxrocÂ =Â input(title="UseÂ ADXÂ RateÂ ofÂ Change?",group="ğŸ”˜Â ADXÂ StrategyÂ SettingsÂ ğŸ”˜",type=input.bool,Â defval=false)
//Â PullbackÂ Settings
usepullback=Â input(title="EnableÂ EMAÂ PullbackÂ Requirement?",group="PullbackÂ Filter",Â type=input.bool,Â defval=false)
ema_pullback_lenÂ =Â input(title="EMAÂ LengthsÂ forÂ PullbackÂ Filter",group="PullbackÂ Filter",Â defval="5/20",Â options=["5/20","20/50","50/100","200/250"])
//
//
//RSIÂ STRATEGY
//
lenÂ =Â rsistratÂ ==Â "MoreÂ Sensitive"Â ?Â 8Â :Â rsistratÂ ==Â "Extreme"Â ?Â 2Â :Â 14
rsisrcÂ =Â close
upÂ =Â rma(max(change(rsisrc),Â 0),Â len)
downÂ =Â rma(-min(change(rsisrc),Â 0),Â len)
rsiÂ =Â downÂ ==Â 0Â ?Â 100Â :Â upÂ ==Â 0Â ?Â 0Â :Â 100Â -Â (100Â /Â (1Â +Â upÂ /Â down))
//RSIÂ Signals
rsiLÂ =Â false
rsiSÂ =Â false
ifÂ rsitypeÂ ==Â "Standard"Â ?Â rsiÂ >=Â 70Â :Â rsitypeÂ ==Â "Reversal"Â ?Â rsiÂ >=Â 30Â :Â rsitypeÂ ==Â "StrictÂ Standard"Â ?Â crossover(rsi,rsitypeÂ ==Â "Extreme"Â ?Â 90Â :Â 70)Â :Â rsitypeÂ ==Â Â "StrictÂ Reversal"Â ?Â crossover(rsi,rsitypeÂ ==Â "Extreme"Â ?Â 10Â :Â 30)Â :Â rsitypeÂ ==Â Â "StrictÂ 50/50"Â ?Â crossover(rsi,50)Â :Â rsiÂ >=Â 50
Â Â Â Â rsiLÂ :=Â true
ifÂ rsitypeÂ ==Â "Standard"Â ?Â rsiÂ <=Â 30Â :Â rsitypeÂ ==Â "Reversal"Â ?Â rsiÂ <=Â 70Â :Â rsitypeÂ ==Â "StrictÂ Standard"Â ?Â crossunder(rsi,rsitypeÂ ==Â "Extreme"Â ?Â 10Â :Â 30)Â :Â rsitypeÂ ==Â Â "StrictÂ Reversal"Â ?Â crossunder(rsi,rsitypeÂ ==Â "Extreme"Â ?Â 90Â :Â 70)Â :Â rsitypeÂ ==Â Â "StrictÂ 50/50"Â ?Â crossunder(rsi,50)Â :Â rsiÂ <=Â 50
Â Â Â Â rsiSÂ :=Â true
//
//Â ADXÂ STRATEGY
//
lenadxsigÂ =Â adxtypeÂ ==Â "Standard"Â ?Â 14Â :Â adxtypeÂ ==Â "MoreÂ Sensitive"Â ?Â 8Â :Â 21
lenadxÂ =Â adxtypeÂ ==Â "Standard"Â ?Â 14Â :Â adxtypeÂ ==Â "MoreÂ Sensitive"Â ?Â 8Â :Â 21
upadxÂ =Â change(high)
downadxÂ =Â -change(low)
plusDMÂ =Â na(upadx)Â ?Â naÂ :Â (upadxÂ >Â downadxÂ andÂ upadxÂ >Â 0Â ?Â upadxÂ :Â 0)
minusDMÂ =Â na(downadx)Â ?Â naÂ :Â (downadxÂ >Â upadxÂ andÂ downadxÂ >Â 0Â ?Â downadxÂ :Â 0)
trurÂ =Â rma(tr,Â lenadx)
plusÂ =Â fixnan(100Â *Â rma(plusDM,Â lenadx)Â /Â trur)
minusÂ =Â fixnan(100Â *Â rma(minusDM,Â lenadx)Â /Â trur)
sumÂ =Â plusÂ +Â minus
adxÂ =Â 100Â *Â rma(abs(plusÂ -Â minus)Â /Â (sumÂ ==Â 0Â ?Â 1Â :Â sum),Â lenadxsig)
adxL_NÂ =Â false
adxS_NÂ =Â false
ifÂ adxÂ >Â 25Â andÂ plusÂ >Â 25Â andÂ minusÂ <Â 20Â 
Â Â Â Â adxL_NÂ :=Â true
ifÂ adxÂ >Â 25Â andÂ plusÂ <Â 20Â andÂ minusÂ >Â 25
Â Â Â Â adxS_NÂ :=Â true
Â Â Â Â 
adxLÂ =Â adxL_NÂ andÂ (adxrocÂ ?Â roc(adx,lookback)Â >Â 0Â :Â true)Â andÂ (adxrocÂ ?Â roc(plus,lookback)Â >Â 0Â :Â true)Â andÂ (adxrocÂ ?Â roc(minus,lookback)Â <Â 0Â :Â true)
adxSÂ =Â adxS_NÂ andÂ (adxrocÂ ?Â roc(adx,lookback)Â <Â 0Â :Â true)Â andÂ (adxrocÂ ?Â roc(plus,lookback)Â <Â 0Â :Â true)Â andÂ (adxrocÂ ?Â roc(minus,lookback)Â >Â 0Â :Â true)
//
//Â ENDÂ ADXÂ Strategy
//
//
//Â OrderÂ Parameters
//
//Â CloseÂ /Â OpenÂ TradeÂ Messages
enableOA=Â input(title="EnableÂ NewÂ TradeÂ Alerts?",Â type=input.bool,Â defval=false,group="AlertÂ Settings")
enableTA=Â input(title="EnableÂ TakeÂ ProfitÂ Alerts?",Â type=input.bool,Â defval=false,group="AlertÂ Settings")
enableSA=Â input(title="EnableÂ StopÂ LossÂ Alerts?",Â type=input.bool,Â defval=false,group="AlertÂ Settings")
opentradelongÂ =Â input(title="LongÂ OpenÂ TradeÂ Alert",Â type=input.string,Â defval="OpenÂ Long",group="AlertÂ Settings")
closelongmessÂ =Â input(title="LongÂ SLÂ Alert",Â type=input.string,Â defval="LongÂ StopÂ Loss",group="AlertÂ Settings")
closelongmessTÂ =Â input(title="LongÂ TPÂ Alert",Â type=input.string,Â defval="LongÂ TakeÂ Profit",group="AlertÂ Settings")
opentradeshortÂ =Â input(title="ShortÂ OpenÂ TradeÂ Alert",Â type=input.string,Â defval="OpenÂ Short",group="AlertÂ Settings")
closeshortmessÂ =Â input(title="ShortÂ SLÂ Alert",Â type=input.string,Â defval="ShortÂ StopÂ Loss",group="AlertÂ Settings")
closeshortmessTÂ =Â input(title="ShortÂ TPÂ Alert",Â type=input.string,Â defval="ShortÂ TakeÂ Profit",group="AlertÂ Settings")
//Â EntryÂ Price
entryÂ =Â ((strategy.position_size[0]Â >Â strategy.position_size[1])Â orÂ (strategy.position_size[0]Â <Â strategy.position_size[1]))Â andÂ strategy.position_size[1]Â ==Â 0
epÂ =Â 0.0
epÂ :=Â na(ep)Â ?Â naÂ :Â ep[1]
islongÂ =Â strategy.position_sizeÂ >Â 0
isshortÂ =Â strategy.position_sizeÂ <Â 0
isnotinÂ =Â strategy.position_sizeÂ ==Â 0
//
//Â StepÂ 4:Â OrderÂ Parameters
//
//
//Â StepÂ 5:Â LongÂ andÂ ShortÂ Conditions
//
//Â TheÂ FixedÂ PercentÂ StopÂ LossÂ Code
//Â UserÂ OptionsÂ toÂ ChangeÂ InputsÂ (%)
entry_barLÂ =Â barssince(strategy.position_size[0]Â >Â strategy.position_size[1])
entry_barSÂ =Â barssince(strategy.position_size[0]Â <Â strategy.position_size[1])
stoptypeÂ =Â input(title="StopÂ LossÂ Method",Â defval="ATRÂ Based",Â options=["PercentÂ Based","ATRÂ Based","AverageÂ ofÂ ATRÂ &Â %"],group="CloseÂ StrategyÂ Settings")
//
//Â PULLBACKÂ CONFIRM
//
ema_pullback_1Â =Â ema_pullback_lenÂ ==Â "5/20"Â ?Â ema(close,5)Â :Â ema_pullback_lenÂ ==Â "20/50"Â ?Â ema(close,20)Â :Â ema_pullback_lenÂ ==Â "50/100"Â ?Â ema(close,50)Â :Â ema(close,200)Â 
ema_pullback_2Â =Â ema_pullback_lenÂ ==Â "5/20"Â ?Â ema(close,20)Â :Â ema_pullback_lenÂ ==Â "20/50"Â ?Â ema(close,50)Â :Â ema_pullback_lenÂ ==Â "50/100"Â ?Â ema(close,100)Â :Â ema(close,250)
plot(ema_pullback_1,"PullbackÂ EMA",color=color.blue,transp=Â usepullbackÂ ?Â 0Â :Â 100)
pullback_LÂ =Â closeÂ <Â ema_pullback_1Â andÂ closeÂ >Â ema_pullback_2Â andÂ roc(close,10)Â <Â 0
pullback_SÂ =Â closeÂ >Â ema_pullback_1Â andÂ closeÂ <Â ema_pullback_2Â andÂ roc(close,10)Â >Â 0Â 
//
//Â ENDÂ PULLBACKÂ CONFIRM
//
//Â DateÂ RangeÂ BacktestÂ Filter
//Â DATEÂ RANGE
//Â CalculateÂ start/endÂ dateÂ andÂ timeÂ condition
limitresults=Â input(title="LimitÂ ResultsÂ toÂ DateÂ Range?",Â type=input.bool,Â defval=false)
startDateÂ Â =Â input(timestamp("2021-05-01T00:00:00"),Â title="BacktestÂ StartÂ Date",Â typeÂ =Â input.time)
finishDateÂ =Â input(timestamp("2021-06-01T00:00:00"),Â title="BacktestÂ EndÂ Date",Â typeÂ =Â input.time)
inDateRangeÂ Â =Â (limitresultsÂ ?Â Â timeÂ >=Â startDateÂ andÂ timeÂ <=Â finishDateÂ :Â 0==0)Â 
//
//MAINÂ VARIABLESÂ LONG
inuptrendÂ =Â useslowemaÂ ?Â closeÂ >Â emaslowÂ :Â 0==0
//
//MAINÂ VARIABLESÂ SHORT
//
indowntrendÂ =Â useslowemaÂ ?Â closeÂ <Â emaslowÂ :Â 0==0
longConditionÂ =Â false
shortConditionÂ =Â false
//Â LONGÂ CONDITIONS
forÂ iÂ =Â 1Â toÂ lookbackÂ +Â 1
Â Â Â Â ifÂ enableLongÂ ?
Â Â Â Â Â (useslowemaÂ ?Â inuptrend[i]Â :Â 0==0)Â and
Â Â Â Â Â (usersiÂ ?Â rsiL[i]Â :Â 0==0)Â and
Â Â Â Â Â (useadxÂ ?Â adxL[i]Â :Â 0==0)Â Â and
Â Â Â Â Â (usepullbackÂ ?Â pullback_LÂ :Â 0==0)
Â Â Â Â Â :Â 1==0
Â Â Â Â Â Â Â Â longConditionÂ :=Â true
//Â SHORTÂ CONDITIONS
forÂ iÂ =Â 1Â toÂ lookbackÂ +Â 1
Â Â Â Â ifÂ enableShortÂ ?Â 
Â Â Â Â Â (useslowemaÂ ?Â indowntrend[i]Â :Â 0==0)Â and
Â Â Â Â Â (usersiÂ ?Â rsiS[i]Â :Â 0==0)Â and
Â Â Â Â Â (useadxÂ ?Â adxS[i]Â :Â 0==0)Â and
Â Â Â Â Â (usepullbackÂ ?Â pullback_SÂ :Â 0==0)
Â Â Â Â Â :Â 1==0
Â Â Â Â Â Â Â Â shortConditionÂ :=Â true
longÂ =Â isnotinÂ andÂ longCondition[0]Â andÂ (notÂ longCondition[1]Â andÂ isnotin[1])
shortÂ =Â isnotinÂ andÂ shortCondition[0]Â andÂ (notÂ longCondition[1]Â andÂ isnotin[1])Â 
ifÂ Â longÂ andÂ inDateRangeÂ 
Â Â Â Â strategy.entry("Long",Â strategy.long,Â whenÂ =Â long,comment="EnterÂ Long")
Â Â Â Â epÂ :=Â closeÂ 
Â Â Â Â ifÂ enableOA
Â Â Â Â Â Â Â Â alert(opentradelong)
Â Â Â Â Â Â Â Â 
ifÂ Â shortÂ andÂ inDateRange
Â Â Â Â strategy.entry("Short",Â strategy.short,Â whenÂ =Â short,comment="EnterÂ Short")
Â Â Â Â epÂ :=Â close
Â Â Â Â ifÂ enableOA
Â Â Â Â Â Â Â Â alert(opentradeshort)
//Â KillÂ TradeÂ Functions
killtradeÂ =Â input(title="AttemptÂ toÂ KillÂ TradeÂ AfterÂ XÂ Bars",group="CloseÂ StrategyÂ Settings",Â defval="Disable",Â options=["Disable","5","10","15","20","25","30","35","40","45","50","55","60","65","70","75","80","85","90","95","100"],tooltip="ThisÂ optionÂ ifÂ setÂ toÂ N/AÂ doesÂ nothing.Â IfÂ setÂ toÂ aÂ value,Â willÂ attemptÂ toÂ closeÂ tradeÂ inÂ profitÂ afterÂ XÂ bars.")
killwhenLÂ =Â killtradeÂ ==Â "Disable"Â ?Â naÂ :Â tonumber(killtrade)Â -Â entry_barLÂ 
killnowLÂ =Â killtradeÂ ==Â "Disable"Â ?Â naÂ :Â killwhenLÂ <=Â 0
killwhenSÂ =Â killtradeÂ ==Â "Disable"Â ?Â na:Â tonumber(killtrade)Â -Â entry_barSÂ 
killnowSÂ =Â killtradeÂ ==Â "Disable"Â ?Â naÂ :Â killwhenSÂ <=Â 0Â 
//Â TakeÂ ProfitÂ andÂ StopÂ LossÂ Calculations
stopPerÂ =Â input(2,Â title='StopÂ LossÂ Percentage',Â type=input.float,group="CloseÂ StrategyÂ Settings")/100
stopATR_multÂ =Â input(1.4,step=0.2,Â title='ATRÂ Multiplier',Â type=input.float,group="CloseÂ StrategyÂ Settings")
taketypeÂ =Â "RiskÂ Based"
takePerÂ =Â input(1.5,step=0.2,Â title='TakeÂ ProfitÂ RiskÂ Multiplier',Â type=input.float,group="CloseÂ StrategyÂ Settings")
atrÂ =Â atr(14)
stopATR_LÂ =Â 0.0
profitATR_LÂ =Â 0.0
stopATR_LÂ :=Â na(stopATR_L)Â ?Â naÂ :Â stopATR_L[1]
profitATR_LÂ :=Â na(profitATR_L)Â ?Â naÂ :Â profitATR_L[1]
stopATR_SÂ =Â 0.0
profitATR_SÂ =Â 0.0
stopATR_SÂ :=Â na(stopATR_S)Â ?Â naÂ :Â stopATR_S[1]
profitATR_SÂ :=Â na(profitATR_S)Â ?Â naÂ :Â profitATR_S[1]
ifÂ longÂ andÂ inDateRange
Â Â Â Â stopATR_LÂ :=Â epÂ -Â (atrÂ *Â stopATR_mult)
Â Â Â Â profitATR_LÂ :=Â epÂ +Â (atrÂ *Â (stopATR_multÂ *Â takePer))
ifÂ shortÂ andÂ inDateRange
Â Â Â Â stopATR_SÂ :=Â epÂ +Â (atrÂ *Â stopATR_mult)
Â Â Â Â profitATR_SÂ :=Â epÂ -Â (atrÂ *Â (stopATR_multÂ *Â takePer))
longStop2Â =Â stoptypeÂ ==Â "AverageÂ ofÂ ATRÂ &Â %"Â ?Â avg(stopATR_L,epÂ *Â (1Â -Â stopPer))Â :Â stoptypeÂ ==Â "ATRÂ Based"Â ?Â stopATR_LÂ :Â stoptypeÂ ==Â "PercentÂ Based"Â ?Â epÂ *Â (1Â -Â stopPer)Â :Â na
shortStop2Â =Â stoptypeÂ ==Â "AverageÂ ofÂ ATRÂ &Â %"Â ?Â avg(stopATR_S,epÂ *Â (1Â +Â stopPer))Â :Â stoptypeÂ ==Â "ATRÂ Based"Â ?Â stopATR_SÂ :Â stoptypeÂ ==Â "PercentÂ Based"Â ?Â epÂ *Â (1Â +Â stopPer)Â :Â na
longTake2Â =Â stoptypeÂ ==Â "AverageÂ ofÂ ATRÂ &Â %"Â ?Â avg(profitATR_L,Â Â epÂ *Â (1Â +Â (stopPerÂ *Â takePer)))Â :Â stoptypeÂ ==Â "ATRÂ Based"Â ?Â profitATR_LÂ Â :Â epÂ *Â (1Â +Â (stopPerÂ *Â takePer))
shortTake2Â =Â stoptypeÂ ==Â "AverageÂ ofÂ ATRÂ &Â %"Â ?Â Â avg(profitATR_S,Â Â epÂ *Â (1Â -Â (stopPerÂ *Â takePer)))Â :Â stoptypeÂ ==Â "ATRÂ Based"Â ?Â profitATR_SÂ :Â epÂ *Â (1Â -Â (stopPerÂ *Â takePer))
//Â EXITÂ CONTIDIONSÂ 
ifÂ Â barssince(entry)Â >=Â 1Â andÂ (lowÂ <=Â longStop2Â andÂ islong)
Â Â Â Â strategy.close(comment="SLÂ Long",id="Long")
Â Â Â Â ifÂ enableSAÂ 
Â Â Â Â Â Â Â Â alert(closelongmess)
Â Â Â Â showwinÂ ?Â label.new(x=bar_index[1]Â -Â 3,Â y=lowÂ -Â low*0.03,text="LOSS",color=color.red,textcolor=color.white,Â style=label.style_label_center,size=size.normal,textalign=text.align_left)Â :Â na
ifÂ Â barssince(entry)Â >=Â 1Â andÂ (killtradeÂ ==Â "Disable"Â ?Â Â highÂ >=Â longTake2Â andÂ islong:Â killnowLÂ andÂ islongÂ ?Â ((closeÂ >Â ep)Â orÂ highÂ >=Â longTake2Â andÂ islong)Â :Â 0==1)
Â Â Â Â strategy.close(comment="TPÂ Long",id="Long")
Â Â Â Â ifÂ enableTAÂ 
Â Â Â Â Â Â Â Â alert(closelongmessT)
Â Â Â Â showwinÂ ?Â label.new(x=bar_index[1]Â -Â 3,Â y=highÂ +Â high*0.03,text="WIN",color=color.green,textcolor=color.white,Â style=label.style_label_center,size=size.normal,textalign=text.align_left)Â :Â na
ifÂ Â barssince(entry)Â >=Â 1Â andÂ (highÂ >=Â shortStop2Â andÂ isshort)
Â Â Â Â strategy.close(comment="SLÂ Short",id="Short")
Â Â Â Â ifÂ enableSA
Â Â Â Â Â Â Â Â alert(closeshortmess)
Â Â Â Â showwinÂ ?Â label.new(x=bar_index[1]Â -Â 3,Â y=highÂ +Â high*0.03,text="LOSS",color=color.red,textcolor=color.white,Â style=label.style_label_center,size=size.normal,textalign=text.align_left)Â :Â na
ifÂ Â barssince(entry)Â >=Â 1Â andÂ (killtradeÂ ==Â "Disable"Â ?Â lowÂ <=Â shortTake2Â andÂ isshortÂ :Â killnowSÂ andÂ isshortÂ ?Â ((closeÂ <Â ep)Â orÂ (lowÂ <=Â shortTake2Â andÂ isshort))Â :Â 0==1)
Â Â Â Â strategy.close(comment="TPÂ Short",id="Short")
Â Â Â Â ifÂ enableTA
Â Â Â Â Â Â Â Â alert(closeshortmessT)
Â Â Â Â showwinÂ ?Â label.new(x=bar_index[1]Â -Â 3,Â y=lowÂ -Â low*0.03,text="WIN",color=color.green,textcolor=color.white,Â style=label.style_label_center,size=size.normal,textalign=text.align_left)Â :Â na
//PLOTÂ FIXEDÂ SLTPÂ LINE
LongFixedSLÂ =Â plot(strategy.position_sizeÂ >Â 0Â Â ?Â longStop2Â :Â na,Â style=plot.style_linebr,Â color=color.red,Â linewidth=1,Â title="LongÂ FixedÂ SL",offset=0)
ShortFixedSLÂ =Â plot(strategy.position_sizeÂ <Â 0Â ?Â shortStop2Â :Â na,Â style=plot.style_linebr,Â color=color.red,Â linewidth=1,Â title="ShortÂ FixedÂ SL",offset=0)
LongTakeProfitÂ =Â plot(strategy.position_sizeÂ >Â 0Â ?Â longTake2Â :Â na,Â style=plot.style_linebr,Â color=color.green,Â linewidth=1,Â title="LongÂ TakeÂ Profit",offset=0)
ShortTakeProfitÂ =Â plot(strategy.position_sizeÂ <Â 0Â ?Â shortTake2Â :Â na,Â style=plot.style_linebr,Â color=color.green,Â linewidth=1,Â title="ShortÂ TakeÂ Profit",offset=0)
LongEPÂ =Â plot(strategy.position_sizeÂ >Â 0Â ?Â epÂ :Â na,Â style=plot.style_linebr,Â color=color.green,Â linewidth=1,Â title="LongÂ EntryÂ Price",offset=0)
ShortEPÂ =Â plot(strategy.position_sizeÂ <Â 0Â ?Â epÂ :Â na,Â style=plot.style_linebr,Â color=color.green,Â linewidth=1,Â title="ShortÂ EntryÂ Price",offset=0)
//Â FillÂ theÂ backgroundÂ areas
fill(LongEP,Â LongFixedSL,
Â Â Â Â Â color=color.red,Â transp=80,Â title="LossÂ Area")
fill(LongEP,Â LongTakeProfit,
Â Â Â Â Â color=color.green,Â transp=80,Â title="WinÂ Area")
fill(ShortEP,Â ShortFixedSL,
Â Â Â Â Â color=color.red,Â transp=80,Â title="LossÂ Area")
fill(ShortEP,Â ShortTakeProfit,
Â Â Â Â Â color=color.green,Â transp=80,Â title="WinÂ Area")
//
//Â EndÂ StepÂ 6C:Â CloseÂ Conditions
//
//
//Â PrintÂ Box
//
//Â LongÂ Print
inrsiLÂ =Â usersiÂ ?Â rsiLÂ ?Â "ğŸŸ¢Â -Â RSI\n\n"Â :Â "ğŸ”´Â -Â RSI\n\n"Â :Â na
inadxLÂ =Â useadxÂ ?Â adxLÂ ?Â "ğŸŸ¢Â -Â ADX\n\n"Â :Â "ğŸ”´Â -Â ADX\n\n"Â :Â na
//Â ShortÂ PrintÂ 
inrsiSÂ =Â usersiÂ ?Â rsiSÂ ?Â "ğŸŸ¢Â -Â RSI\n\n"Â :Â "ğŸ”´Â -Â RSI\n\n"Â :Â na
inadxSÂ =Â useadxÂ ?Â adxSÂ ?Â "ğŸŸ¢Â -Â ADX\n\n"Â :Â "ğŸ”´Â -Â ADX\n\n"Â :Â na
printÂ =Â "Ticker:Â "Â +Â syminfo.tickerÂ +Â "\n\n"Â 
Â +Â (islongÂ ?Â "ğŸŸ¢Â InÂ LongÂ TradeÂ forÂ "Â +Â tostring(entry_barL)Â +Â "Â bars\n\n"Â :Â na)
Â +Â (isshortÂ ?Â "ğŸ”´Â InÂ ShortÂ TradeÂ forÂ "Â +Â tostring(entry_barS)Â +Â "Â bars\n\n"Â :Â na)
Â +Â (enableLongÂ ?Â "LongÂ Signals\n__________\n\n"
Â +Â inrsiL
Â +Â inadxL
Â +Â (enableShortÂ ?Â "\n\n\n"Â :Â na)Â :Â na)
Â +Â (enableShortÂ ?Â "ShortÂ Signals\n__________\n\n"
Â +Â inrsiS
Â +Â inadxS
Â +Â "\n\n\n"Â :Â na)
Â +Â (backtestÂ ?Â "\n\n\nBacktestÂ Results\n__________\n\n"
Â +Â "WinningÂ Trades:Â "Â +Â tostring(strategy.wintrades)Â +Â "\n"
Â +Â "LosingÂ Trades:Â "Â +Â tostring(strategy.losstrades)Â +Â "\n\n"
Â +Â "WinÂ %:Â "Â +Â tostring(round((strategy.wintradesÂ /Â (strategy.wintradesÂ +Â strategy.losstrades))Â *Â 100))Â +Â "\n\n"Â :Â na)
Â 
boxÂ =Â showboxÂ ?Â label.new(x=timeÂ +Â 100*(timeÂ -Â time[1]),Â y=close,text=print,xloc=xloc.bar_time,yloc=yloc.price,color=color.navy,textcolor=color.white,Â style=label.style_label_center,size=size.normal,textalign=text.align_left)Â :Â na
label.delete(box[1])
//
//
//
Expand (344 lines)